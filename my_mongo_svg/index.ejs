<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <script src="https://github.com/processing/p5.js/releases/download/1.2.0/p5.min.js"></script>
</head>
<body class="container mt-3">
    <div class="card-header">
        <h2 class="text-primary"><%= title %></h2>
        <% let pop = 0 %>
        <% let deaths = 0 %>
        <% for (let i=0; i<data.length; i++) { %>
                <% pop = pop + data[i].pop %>
                <% deaths = deaths + data[i].deaths %>
        <% } %>
        <h4 class="text-secondary">Population : <%= pop %> Deaths : <%= deaths %></h4>
        <h5 class="text-secondary"><%= data[0].date %></h5>
        <svg  viewBox="75 25 90 40" width="100">
            <polyline points="85.497137,30.997536 85.004212,31.003013 84.867289,30.712735 83.498053,30.647012 82.216449,30.570335 82.167157,30.356734 82.046664,30.362211 82.002849,30.564858 82.041187,30.751074 81.948079,30.827751 81.718048,30.745597 81.444201,30.707258 81.383954,30.27458 81.257985,29.787132 80.967707,29.14633 80.524075,28.461713 80.589798,28.41242 80.56789,28.094758 80.381674,27.738757 80.091397,27.021277 80.03115,26.796723 80.036627,26.566691 80.146166,25.739673 80.239274,25.723243 80.337859,25.465826 80.304997,25.383672 80.49669,25.197456 80.573367,25.241272 80.759583,25.164595 81.077246,25.120779 81.170354,25.224841 81.126538,25.378195 81.351093,25.821827 81.526355,25.903982 81.679709,25.843735 81.800202,26.090198 81.833064,26.292844 82.041187,26.517399 82.09048,26.665276 82.057618,26.878877 82.172634,26.917216 82.145249,26.791246 82.249311,26.758384 82.566974,27.300601 82.692943,27.437525 82.391711,27.837342 82.588881,27.815434 82.720328,27.689464 82.851774,27.886634 82.676512,28.434328 82.643651,28.888914 82.764143,28.998453 82.802482,29.14633 82.994175,29.179192 83.218729,29.420177 83.399469,29.518762 83.410422,29.66664 83.536392,29.721409 83.640454,29.885717 84.02384,30.104795 84.357933,30.055502 84.341502,29.902148 84.451041,29.929533 84.867289,29.743317 85.310921,29.699501 85.299967,29.80904 85.404029,29.940487 85.924338,30.236241 86.29677,30.362211 86.630863,30.395073 86.910187,30.373165 87.518128,30.280057 87.37025,30.427934 87.446927,30.510088 87.408589,30.674397 87.633143,30.86609 87.600282,30.997536 85.497137,30.997536"
            fill="none" stroke="black" stroke-width="1" 
            transform="translate(-150 -40) scale(3 3)"
            />
        </svg>
</div>
    <div class="card-body">
        <div class="row align-items-start" style="background-color:lightcyan">
            <div class="col">
                US State
            </div>
              <div class="col">
                Population
            </div>
            <div class="col">
                Covid confirmed
            </div>
            <div class="col">
                Deaths
            </div>
            <div class="col">
                Covid / Pop.
            </div>
            <div class="col-4">
                Covid / Pop. (0 - 15%)
            </div>
        </div>
        <% for (let i=0; i<data.length; i++) { %>
            <div class="row align-items-start" style="background-color:lightgray">
                <div class="col">
                    <%= data[i]._id %>
                </div>
                <div class="col">
                    <%= data[i].pop %>
                </div>
                <div class="col">
                    <%= data[i].confirmed %>
                </div>
                <div class="col">
                    <%= data[i].deaths %>
                </div>
                <div class="col">
                    <%= Math.floor(100 * data[i].confirmed / data[i].pop) %> %
                </div>
                <div class="col-4">
                    <svg width="300" height="14">
                        <rect x="0" y="0" width="300" height="14" stroke="black" stroke-width="1" fill="transparent"/>  
                        <rect x="1" y="1" width="<%= 2000 * data[i].confirmed / data[i].pop %>" height="12" fill="red" />  
                    </svg>
                </div>
            </div>
        <% } %>
    </div>
    <script>
    </script>
</body>
</html>